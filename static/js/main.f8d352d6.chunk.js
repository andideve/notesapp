(this["webpackJsonpnotes-app"]=this["webpackJsonpnotes-app"]||[]).push([[0],{24:function(e,t,n){e.exports={form_group:"Input_form_group__JDZ3x",form_label:"Input_form_label__PvZg7",form_control:"Input_form_control__2UAhT",as_placeholder:"Input_as_placeholder__1l3jg"}},51:function(e,t,n){},53:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(1),r=n.n(c),i=n(20),o=n.n(i),s=(n(51),n(52),n(53),n(9)),l=n(38),u=n(11),d=n(18),j=n(29),b=n(10),h={profile:{email:"",uid:""},notes:null},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PROFILE":return Object(b.a)(Object(b.a)({},e),{},{profile:t.data});case"SET_NOTES":return Object(b.a)(Object(b.a)({},e),{},{notes:t.data})}return e},f=Object(j.b)(p),m=n(21);n(57),n(60),n(66);m.a.initializeApp({apiKey:"AIzaSyCENzshjArP0YQwdZFQPncEgmwD5KAxC6M",authDomain:"andideve-notes-app.firebaseapp.com",projectId:"andideve-notes-app",storageBucket:"andideve-notes-app.appspot.com",messagingSenderId:"921227114187",appId:"1:921227114187:web:772bad087b2714b4898d4e"});var O=m.a.database(),x=m.a.auth(),v=(m.a.storage(),m.a,n(35)),g=n.n(v),w=n(41),k=function(e){x.onAuthStateChanged((function(t){return e(t)}))},y=function(){var e=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.signOut();case 3:if(t){e.next=5;break}return e.abrupt("return");case 5:t(!0),e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(0),console.error(e.t0),t){e.next=13;break}return e.abrupt("return");case 13:t(!1);case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),C=n(67),S=n(68),N=n(44),_=n(71),E=n(30),P=function(e){return new Date(e).toLocaleDateString().replaceAll("/","-")},I=n(70),D=n(45);function F(e){var t=e.title,n=e.time,r=e.onEdit,i=e.onDelete,o=Object(E.a)(e,["title","time","onEdit","onDelete"]),s=Object(c.useRef)(),l=Object(c.useState)(!1),d=Object(u.a)(l,2),j=d[0],h=d[1];return Object(D.a)(s,(function(){return h(!1)}),{disabled:!j}),Object(a.jsx)(I.a,Object(b.a)(Object(b.a)({className:"note"},o),{},{children:Object(a.jsxs)(I.a.Body,{children:[Object(a.jsx)("h1",{className:"h5",children:t}),Object(a.jsx)("time",{dateTime:n,children:P(n)}),Object(a.jsx)("button",{className:"options-trigger",onClick:function(e){e.stopPropagation(),h(!j)},children:"..."}),Object(a.jsx)("div",{className:"options ".concat(j?"show":""),ref:s,children:Object(a.jsxs)("ul",{onClick:function(e){e.stopPropagation(),h(!1)},children:[Object(a.jsx)("li",{onClick:r,children:"Edit"}),Object(a.jsx)("li",{onClick:i,children:"Hapus"})]})})]})}))}F.defaultProps={title:"",time:new Date,onEdit:function(){},onDelete:function(){}};var T=Object(d.b)((function(e){return{profile:e.profile,notes:e.notes}}),(function(e){return{setProfile:function(t){return e({type:"SET_PROFILE",data:t})}}}))((function(e){var t=e.setProfile,n=e.profile,r=e.notes,i=e.history,o=Object(c.useState)(!1),s=Object(u.a)(o,2),l=s[0],d=s[1];Object(c.useEffect)((function(){return l||k((function(e){if(!e)return i.replace("/");var n=e.email,a=e.uid;t({email:n,uid:a}),function(e){O.ref("notes/").child(e).on("value",(function(e){var t=e.val();f.dispatch({type:"SET_NOTES",data:t})}))}(a),d(!0)})),function(){null===window.localStorage.getItem("introduced")&&window.localStorage.setItem("introduced",!0)}}),[i,l,t]);var j=function(e){var t=Object.keys(r)[e];i.push("/notes/".concat(t))};return n.email.length<1?null:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("header",{children:Object(a.jsx)(C.a,{children:Object(a.jsx)(S.a,{children:Object(a.jsxs)(N.a,{lg:7,children:[Object(a.jsx)("h1",{className:"mb-0",children:n.email.split("@")[0]}),Object(a.jsxs)("p",{children:["at ",n.email.split("@")[1]]})]})})})}),Object(a.jsxs)("main",{children:[Object(a.jsx)("section",{children:Object(a.jsx)(C.a,{children:Object(a.jsx)(S.a,{children:Object(a.jsxs)(N.a,{lg:7,children:[r&&Object.values(r).sort((function(e,t){return Number(e.time)<Number(t.time)?1:-1})).map((function(e,t){return Object(a.jsx)(F,{title:e.title,time:e.time,onClick:function(){return j(t)},onEdit:function(){return j(t)},onDelete:function(){return function(e){if(window.confirm("Apakah yakin ingin menghapus catatan ini?")){var t=Object.keys(r)[e];O.ref("notes/".concat(n.uid,"/")).child(t).remove((function(e){if(e)return alert("error occured")}))}}(t)}},t)})),!r&&null===window.localStorage.getItem("introduced")&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("h2",{className:"h4",children:["Hai, ",n.email.split("@")[0]]}),Object(a.jsx)("p",{children:"Catatanmu saat ini sedang kosong, mulailah dengan menulis baru."})]}),l&&!r&&window.localStorage.getItem("introduced")&&Object(a.jsx)("p",{className:"text-muted",children:"Catatan kosong"})]})})})}),Object(a.jsxs)("div",{className:"navigation shadow-lg",children:[Object(a.jsx)(_.a,{variant:"warning",className:"navi",onClick:function(){window.confirm("Apakah yakin ingin keluar?")&&y()},children:"Keluar"}),Object(a.jsx)(_.a,{variant:"primary",className:"navi",onClick:function(){return i.push("/notes/new")},children:"Tulis baru"})]})]})]})}));var A=Object(d.b)((function(e){return{profile:e.profile,notes:e.notes}}))((function(e){var t=e.profile,n=e.notes,r=e.match,i=e.history,o=Object(c.useState)({title:"",body:""}),s=Object(u.a)(o,2),l=s[0],d=s[1],j=Object(c.useState)(!1),h=Object(u.a)(j,2),p=h[0],f=h[1];Object(c.useEffect)((function(){var e=r.params.id;if(e&&!n)return i.replace("/notes");if(e){var t=n[e];d(t)}}),[r,n,i]);var m=function(e){var t=e.target,n=t.id,a=t.value,c=Object(b.a)({},l);c[n]=a,d(c),f(!0)};return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("main",{children:[Object(a.jsx)("section",{children:Object(a.jsx)(C.a,{children:Object(a.jsx)(S.a,{children:Object(a.jsx)(N.a,{lg:7,children:Object(a.jsxs)("form",{children:[Object(a.jsx)("input",{id:"title",className:"input-title h2 mb-4",value:l.title,onChange:m,autoFocus:"on",placeholder:"Judul masukan",autoComplete:"off"}),Object(a.jsx)("textarea",{id:"body",className:"input-body",value:l.body,onChange:m})]})})})})}),Object(a.jsxs)("div",{className:"navigation shadow-lg",children:[Object(a.jsx)(_.a,{variant:"warning",className:"navi",onClick:function(){return i.replace("/notes")},children:"Kembali"}),Object(a.jsx)(_.a,{variant:p?"primary":"secondary",className:"navi",disabled:!l.body.length||!l.title.length,onClick:function(e){e.preventDefault();var n=r.params.id;n?O.ref("notes/".concat(t.uid,"/")).child(n).set(l,(function(e){if(e)return alert("error occured");f(!1)})):O.ref("notes/".concat(t.uid,"/")).push(Object(b.a)(Object(b.a)({},l),{},{time:(new Date).getTime()}),(function(e){return e?alert("error occured"):i.replace("/notes")}))},children:"Simpan"})]})]})})})),L=n(69),q=n(24),B=n.n(q);function M(e){var t=e.id,n=e.placeholder,c=e.value,r=e.onChange,i=e.key,o=Object(E.a)(e,["id","placeholder","value","onChange","key"]);return Object(a.jsxs)(L.a.Group,{controlId:t,className:B.a.form_group,children:[Object(a.jsx)(L.a.Label,{className:"".concat(B.a.form_label," ").concat(!c.length&&B.a.as_placeholder),onClick:function(e){return e.target.nextSibling.focus()},children:n}),Object(a.jsx)(L.a.Control,Object(b.a)({className:B.a.form_control,value:c,onChange:r},o))]},i)}M.defaultProps={value:""};var J=M;var K=[{path:"/",component:Object(d.b)((function(e){return{profile:e.profile}}),(function(e){return{setProfile:function(t){return e({type:"SET_PROFILE",data:t})}}}))((function(e){var t=e.setProfile,n=e.history,r=Object(c.useState)({email:"",password:""}),i=Object(u.a)(r,2),o=i[0],s=i[1],l=Object(c.useState)(!1),d=Object(u.a)(l,2),j=d[0],h=d[1],p=Object(c.useState)(!1),f=Object(u.a)(p,2),m=f[0],O=f[1];Object(c.useEffect)((function(){j||k((function(e){if(e){var a=e.email,c=e.uid;return t({email:a,uid:c}),n.push("/notes")}h(!0)}))}),[j,t,n]);var v=function(e){var t=e.target,n=t.id,a=t.value,c=Object(b.a)({},o);c[n]=a,s(c)};return j?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("main",{children:Object(a.jsx)(C.a,{children:Object(a.jsx)(S.a,{children:Object(a.jsxs)(N.a,{lg:4,children:[Object(a.jsx)("h1",{className:"h3 mb-4 text-center",children:"Masuk"}),Object(a.jsxs)("form",{onSubmit:function(e){var a,c,r;e.preventDefault(),O(!0),a=o.email,c=o.password,r=function(e,a){if(e)return O(!1),alert(e);var c=a.user,r=c.email,i=c.uid;return t({email:r,uid:i}),n.replace("/notes")},x.signInWithEmailAndPassword(a,c).then((function(e){r(!1,e)})).catch((function(e){console.error(e),r(e,null)}))},children:[Object(a.jsx)(J,{id:"email",type:"email",value:o.email,onChange:v,placeholder:"Email",autoFocus:"on",required:!0}),Object(a.jsx)(J,{id:"password",value:o.password,onChange:v,placeholder:"Password",type:"password",required:!0}),Object(a.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(a.jsx)(_.a,{variant:"link",className:"px-0",onClick:function(){return n.push("/register")},children:"Daftar akun"}),Object(a.jsx)(_.a,{variant:"primary",type:"submit",disabled:m,children:"Masuk"})]})]})]})})})})}):null})),exact:!0},{path:"/register",component:function(e){var t=e.history,n=Object(c.useState)({email:"",password:""}),r=Object(u.a)(n,2),i=r[0],o=r[1],s=Object(c.useState)(!1),l=Object(u.a)(s,2),d=l[0],j=l[1],h=function(e){var t=e.target,n=t.id,a=t.value,c=Object(b.a)({},i);c[n]=a,o(c)};return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("main",{children:Object(a.jsx)(C.a,{children:Object(a.jsx)(S.a,{children:Object(a.jsxs)(N.a,{lg:4,children:[Object(a.jsx)("h1",{className:"h3 mb-4 text-center",children:"Daftar Akun"}),Object(a.jsxs)("form",{onSubmit:function(e){var n,a,c;e.preventDefault(),j(!0),n=i.email,a=i.password,c=function(e,n){return e?(j(!1),alert(e)):(alert("Pendaftaran akun berhasil"),t.replace("/"))},x.createUserWithEmailAndPassword(n,a).then((function(e){c(!1,e)})).catch((function(e){console.error(e),c(e,null)}))},children:[Object(a.jsx)(J,{id:"email",type:"email",value:i.email,onChange:h,placeholder:"Email",autoFocus:"on",required:!0}),Object(a.jsx)(J,{id:"password",value:i.password,onChange:h,placeholder:"Password",type:"password",required:!0}),Object(a.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(a.jsx)(_.a,{variant:"link",className:"px-0",onClick:function(){return t.push("/")},children:"Masuk"}),Object(a.jsx)(_.a,{variant:"primary",disabled:d,type:"submit",children:"Buat akun"})]})]})]})})})})})},exact:!1},{path:"/notes",component:T,exact:!0},{path:"/notes/new",component:A,exact:!1},{path:"/notes/:id",component:A,exact:!1}];function R(){var e=Object(s.f)().pathname;return Object(c.useEffect)((function(){window.scrollTo(0,0);var e=document.querySelector("html");e.classList.add("nprogress-bussy"),setTimeout((function(){e.classList.remove("nprogress-bussy")}),600)}),[e]),null}var z=function(){return Object(a.jsx)(l.a,{children:Object(a.jsxs)(l.b,{children:[Object(a.jsx)(s.a,{path:"/",component:R,exact:!1}),Object(a.jsxs)(s.c,{children:[K.map((function(e,t){return Object(a.jsx)(s.a,{exact:e.exact,path:e.path,component:e.component},t)})),Object(a.jsx)(s.a,{path:"*",children:Object(a.jsx)(e,{})})]})]})});function e(){var e=Object(s.f)();return Object(a.jsx)("div",{children:Object(a.jsxs)("h3",{children:["No match for ",Object(a.jsx)("code",{children:e.pathname})]})})}},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,72)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(d.a,{store:f,children:Object(a.jsx)(z,{})})}),document.getElementById("root")),Z()}},[[65,1,2]]]);
//# sourceMappingURL=main.f8d352d6.chunk.js.map